import{_ as t,r as p,o,c,a as n,d as a,e,b as i}from"./app-571c1f36.js";const l={},d=n("h1",{id:"使用daterangepicker日期选择插件",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#使用daterangepicker日期选择插件","aria-hidden":"true"},"#"),a(" 使用daterangepicker日期选择插件")],-1),r={href:"https://www.daterangepicker.cn/#usage",target:"_blank",rel:"noopener noreferrer"},u=n("code",null,"jquery",-1),k=n("code",null,"moment",-1),h=n("code",null,"daterangepicker.js",-1),m=n("code",null,"daterangepicker.css",-1),v=i(`<h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题" aria-hidden="true">#</a> 问题：</h2><p>但是在项目中，遇到一个问题，就是默认值无法取消。查了下资料，于是就改了下源码。</p><h2 id="方案之一" tabindex="-1"><a class="header-anchor" href="#方案之一" aria-hidden="true">#</a> 方案之一：</h2><p>我们最后选择这个属性进行修改:</p><pre><code>\`autoUpdateInput\`: (true/false)指示日期范围选择器是否应\`&lt;input&gt;\` 在初始化时以及所选日期更改时自动更新其附加元素的值。
</code></pre><p>在源码中，当 <code>autoUpdateInput</code> 设置为 <code>false</code> 之后，我们想要在点击确定，选中日期和点击 <code>range</code> 三个地方，将 <code>autoUpdateInput</code> 改变回来，所以，在三处设置了 <code>this.autoUpdateInput=true</code> 属性，在在1207行左右， <code>clickrange</code> 函数中，当点击选择了 <code>range</code> 时，改变 <code>autoUpdateInput</code> 属性，在 <code>else</code> 中加入，是因为当选择自定义标签时，如果没有选择日期，依旧不改变默认值。选择日期的改变，在后文所示。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>endDate <span class="token operator">&amp;&amp;</span> date<span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>startDate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>autoUpdateInput<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">//special case: clicking the same date for start/end,</span>
    <span class="token comment">//but the time of the end date is before the start date</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setEndDate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>startDate<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// picking end</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>autoUpdateInput<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timePicker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在1335行左右， <code>clickdate</code> 函数中，当点击选择了 <code>enddate</code> 也就是完整的选择了日期时</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>endDate <span class="token operator">&amp;&amp;</span> date<span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>startDate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>autoUpdateInput<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">//special case: clicking the same date for start/end,</span>
        <span class="token comment">//but the time of the end date is before the start date</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setEndDate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>startDate<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// picking end</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>autoUpdateInput<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timePicker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在1400行左右，还有一种情况，就是当有时分秒的时间显示时，有可能用户会直接点击确认，或更改时分秒，来选择日期，所以在 <code>clickapply</code> 函数中，也改变 <code>autoUpdateInput</code> 值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function-variable function">clickApply</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>autoUpdateInput<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="完整demo" tabindex="-1"><a class="header-anchor" href="#完整demo" aria-hidden="true">#</a> 完整demo</h2>`,12),b={href:"https://yydha.gitee.io/html-demo/html/%E4%BD%BF%E7%94%A8daterangepicker%E6%97%A5%E6%9C%9F%E9%80%89%E6%8B%A9%E6%8F%92%E4%BB%B6.html",target:"_blank",rel:"noopener noreferrer"},g=n("h2",{id:"gitee地址",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#gitee地址","aria-hidden":"true"},"#"),a(" gitee地址")],-1),f={href:"https://gitee.com/yydha/html-demo/blob/master/html/%E4%BD%BF%E7%94%A8daterangepicker%E6%97%A5%E6%9C%9F%E9%80%89%E6%8B%A9%E6%8F%92%E4%BB%B6.html",target:"_blank",rel:"noopener noreferrer"};function _(y,w){const s=p("ExternalLinkIcon");return o(),c("div",null,[d,n("p",null,[a("在 "),n("a",r,[a("官方文档"),e(s)]),a("上，的说明就是，引入 "),u,a("，"),k,a(" 和本身的 "),h,a("和 "),m,a("，在执行自己的js即可。")]),v,n("p",null,[n("a",b,[a("使用daterangepicker日期选择插件"),e(s)])]),g,n("p",null,[n("a",f,[a("使用daterangepicker日期选择插件"),e(s)])])])}const B=t(l,[["render",_],["__file","shiyongdaterangepickerriqixuanzechajian.html.vue"]]);export{B as default};
